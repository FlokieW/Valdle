<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valdle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .guess-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 16px;
        }
        .guess-item {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border-radius: 4px;
        }
        .correct { background-color: #4ade80; }
        .incorrect { background-color: #f87171; }
        .neutral { background-color: #6b7280; }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4">
        <h1 class="text-6xl font-bold mb-8">Valdle</h1>
        <div id="content" class="w-full max-w-md"></div>
    </div>

    <script>
        const app = {
            currentPage: 'home',
            currentSkin: null,
            guesses: [],
            maxGuesses: 6,
            
            skins: [
                { name: '2ge', tier: 'Deluxe', releaseDate: '2023-02-14', color: 'Red' },
                { name: 'Apoth', tier: 'Premium', releaseDate: '2023-08-29', color: 'Green' },
                { name: 'Philippines', tier: 'Select', releaseDate: '2022-06-02', color: 'Blue' },
                { name: 'Canada', tier: 'Select', releaseDate: '2022-06-02', color: 'Red' },
                { name: 'Ignition', tier: 'Deluxe', releaseDate: '2021-07-07', color: 'Cyan' },
                { name: 'Draco', tier: 'Premium', releaseDate: '2022-07-25', color: 'Red' },
                { name: 'Araxys', tier: 'Premium', releaseDate: '2022-12-07', color: 'Blue' },
                { name: 'Evil', tier: 'Deluxe', releaseDate: '2023-06-07', color: 'Green' },
                { name: 'Team Secret', tier: 'Exclusive', releaseDate: '2022-09-13', color: 'Red' },
                { name: 'Evil Geniuses', tier: 'Exclusive', releaseDate: '2022-09-13', color: 'Blue' },
            ],

            init() {
                this.render();
            },

            setPage(page) {
                this.currentPage = page;
                if (page === 'guess-the-skin') {
                    this.startNewGame();
                }
                this.render();
            },

            render() {
                const content = document.getElementById('content');
                content.innerHTML = '';

                switch (this.currentPage) {
                    case 'home':
                        content.innerHTML = `
                            <div class="space-y-4">
                                <button onclick="app.setPage('guess-the-skin')" class="block w-full px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg text-xl font-semibold transition duration-300">
                                    Guess the Skin
                                </button>
                            </div>
                        `;
                        break;
                    case 'guess-the-skin':
                        this.renderGuessTheSkin();
                        break;
                }

                if (this.currentPage !== 'home') {
                    content.innerHTML += `
                        <button onclick="app.setPage('home')" class="mt-4 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg text-lg font-semibold transition duration-300">
                            Back to Home
                        </button>
                    `;
                }
            },

            startNewGame() {
                this.currentSkin = this.skins[Math.floor(Math.random() * this.skins.length)];
                this.guesses = [];
            },

            renderGuessTheSkin() {
                const content = document.getElementById('content');
                let guessGridHTML = '';

                for (let i = 0; i < this.maxGuesses; i++) {
                    const guess = this.guesses[i] || { name: '', tier: '', releaseDate: '', color: '', team: '' };
                    const rowClass = i < this.guesses.length ? '' : 'opacity-50';
                    guessGridHTML += `
                        <div class="guess-grid ${rowClass}">
                            <div class="guess-item ${this.getItemClass(guess.name)}">${guess.name.substring(0, 2) || ''}</div>
                            <div class="guess-item ${this.getItemClass(guess.tier)}">${guess.tier.substring(0, 2) || ''}</div>
                            <div class="guess-item ${this.getItemClass(guess.releaseDate)}">${guess.releaseDate.substring(2, 4) || ''}</div>
                            <div class="guess-item ${this.getItemClass(guess.color)}">${guess.color.substring(0, 2) || ''}</div>
                            <div class="guess-item ${this.getItemClass(guess.team)}">${guess.team ? 'Y' : 'N'}</div>
                        </div>
                    `;
                }

                content.innerHTML = `
                    <div class="mb-4">
                        <h2 class="text-2xl font-bold mb-2">Guess the Skin</h2>
                        ${guessGridHTML}
                    </div>
                    <div class="mb-4 relative">
                        <input id="skinGuess" type="text" placeholder="Enter skin name" class="w-full p-2 text-black rounded" onfocus="app.showDropdown()" onblur="app.hideDropdown()">
                        <div id="skinDropdown" class="hidden absolute z-10 w-full bg-white border border-gray-300 max-h-60 overflow-y-auto">
                            ${this.skins.map(skin => `<div class="p-2 hover:bg-gray-200 cursor-pointer text-black" onmousedown="app.selectSkin('${skin.name}')">${skin.name}</div>`).join('')}
                        </div>
                    </div>
                    <button onclick="app.guessSkin()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                        Guess
                    </button>
                    <div id="skinFeedback" class="mt-4"></div>
                `;
            },

            getItemClass(value) {
                if (!value) return 'neutral';
                return value.toLowerCase() === this.currentSkin[value.toLowerCase()]?.toLowerCase() ? 'correct' : 'incorrect';
            },

            showDropdown() {
                document.getElementById('skinDropdown').classList.remove('hidden');
            },

            hideDropdown() {
                setTimeout(() => {
                    document.getElementById('skinDropdown').classList.add('hidden');
                }, 200);
            },

            selectSkin(skinName) {
                document.getElementById('skinGuess').value = skinName;
            },

            guessSkin() {
                const guessInput = document.getElementById('skinGuess');
                const guess = guessInput.value;
                const guessedSkin = this.skins.find(skin => skin.name.toLowerCase() === guess.toLowerCase());
                
                if (guessedSkin) {
                    this.guesses.push({
                        name: guessedSkin.name,
                        tier: guessedSkin.tier,
                        releaseDate: guessedSkin.releaseDate,
                        color: guessedSkin.color,
                        team: guessedSkin.name.includes('Evil') || guessedSkin.name.includes('Team')
                    });
                    guessInput.value = '';
                    
                    if (guessedSkin.name === this.currentSkin.name || this.guesses.length === this.maxGuesses) {
                        this.endGame();
                    } else {
                        this.renderGuessTheSkin();
                    }
                } else {
                    alert('Invalid skin name. Please choose from the dropdown.');
                }
            },

            endGame() {
                const feedback = document.getElementById('skinFeedback');
                if (this.guesses[this.guesses.length - 1].name === this.currentSkin.name) {
                    feedback.innerHTML = `Congratulations! You guessed the skin in ${this.guesses.length} tries.`;
                } else {
                    feedback.innerHTML = `Game over. The correct skin was ${this.currentSkin.name}.`;
                }
                this.renderGuessTheSkin();
            }
        };

        app.init();
    </script>
</body>
</html>